# Performance vs Scalability Git and GitHub
## `什麼是版本控制`

版本控制（Revision control）是一種在開發的過程中用於管理我們對文件、目錄或工程等內容的修改歷史，方便查看更改歷史記錄，備份以便恢復以前的版本的軟件工程技術。

* 實現跨區域多人協同開發

* 追踪和記載一個或者多個文件的歷史記錄

* 組織和保護你的程式碼和文檔

* 統計工作量

* 並行開發、提高開發效率

* 跟踪記錄整個程式的開發過程

* 減輕開發人員的負擔，節省時間，同時降低人為錯誤

* 簡單說就是用於管理多人協同開發項目的技術。

沒有進行版本控製或者版本控製本身缺乏正確的流程管理，在程式開發過程中將會引入很多問題，如程式碼的一致性、程式內容的冗餘、程式過程的事物性、程式開發過程中的並發性、程式代碼的安全性，以及程式的整合等問題。

無論是工作還是學習，或者是自己做筆記，都經歷過這樣一個階段！我們就迫切需要一個版本控制工具！

## **版本控制工具**

- **集中式**：CSV ,**SVN**,VSS
- **分布式**：**Git**，Darcs,...
  
## `什麼是集中版本控制 SVN`

所有的版本數據都保存在服務器上，協同開發者從服務器上同步更新或上傳自己的修改所有的版本數據都存在服務器上，用戶的本地只有自己以前所同步的版本，如果不連網的話，用戶就看不到歷史版本，也無法切換版本驗證問題，或在不同分支工作。而且，所有數據都保存在單一的服務器上，有很大的風險這個服務器會損壞，這樣就會丟失所有的數據，當然可以定期備份。代表產品：SVN、CVS、VSS

## `什麼是分佈式版本控制 	Git`

每個人都擁有全部的代碼！安全隱患！

所有版本信息倉庫全部同步到本地的每個用戶，這樣就可以在本地查看所有版本歷史，可以離線在本地提交，只需在連網時push到相應的服務器或其他用戶那裡。由於每個用戶那裡保存的都是所有的版本數據，只要有一個用戶的設備沒有問題就可以恢復所有的數據，但這增加了本地存儲空間的佔用。

不會因為服務器損壞或者網絡問題，造成不能工作的情況！

![集中版vs分佈式](/images/images.png)

## Git 工作流原理【重要】

先看張圖，這圖還挺重要，吃透這張圖，其實日常使用Git 就沒什麼問題了。

這張原理圖涉及到6個命令非常重要，先學會這幾個，其餘的其實還有百十個也記不住，用到再去學。
![集中版vs分佈式](/images/git.png)

```第一次看圖請往左至右```

解釋下幾個名詞

* Workspace：工作區，其實就是咱們寫代碼的地方

* Index / Stage：暫存區，執行git add 命令就把工作區內容提交到了暫存區

* Repository：倉庫區（或本地倉庫），執行git commit命令就會把暫存區的內容提交到本地倉庫

* Remote：遠程倉庫，執行git push命令就可以把本地代碼推到遠程分支

其實數據就是在上述幾個地方流轉

文件在這四個區域之間的轉換關係如下：


![集中版vs分佈式](/images/git2.png)

本地的三個區域確切的說應該是git倉庫中HEAD指向的版本：
![集中版vs分佈式](/images/git4.png)

* Directory：使用Git管理的一個目錄，也就是一個倉庫，包含我們的工作空間和Git的管理空間。

* WorkSpace：需要通過Git進行版本控制的目錄和文件，這些目錄和文件組成了工作空間。

* .git：存放Git管理信息的目錄，初始化倉庫的時候自動創建。

* Index/Stage：暫存區，或者叫待提交更新區，在提交進入repo之前，我們可以把所有的更新放在暫存區。

* Local Repo：本地倉庫，一個存放在本地的版本庫；HEAD會只是當前的開發分支（branch）。

* Stash：隱藏，是一個工作狀態保存棧，用於保存/恢復WorkSpace中的臨時狀態。

![集中版vs分佈式](/images/git3.png)

# `工作流程`

git的工作流程一般是這樣的：

１、在工作目錄中添加、修改文件；

２、將需要進行版本管理的文件放入暫存區域；

３、將暫存區域的文件提交到git倉庫。

因此，git管理的文件有三種狀態：已修改（modified）,已暫存（staged）,已提交(committed)

## `Git文件操作`

文件的四種狀態

版本控制就是對文件的版本控制，要對文件進行修改、提交等操作，首先要知道文件當前在什麼狀態，不然可能會提交了現在還不想提交的文件，或者要提交的文件沒提交上。

* Untracked: 未跟踪, 此文件在文件夾中, 但並沒有加入到git庫, 不參與版本控制. 通過git add 狀態變為Staged.

* Unmodify: 文件已經入庫, 未修改, 即版本庫中的文件快照內容與文件夾中完全一致. 這種類型的文件有兩種去處, 如果它被修改, 而變為Modified. 如果使用git rm移出版本庫, 則成為Untracked文件

* Modified: 文件已修改, 僅僅是修改, 並沒有進行其他的操作. 這個文件也有兩個去處, 通過git add可進入暫存staged狀態, 使用git checkout 則丟棄修改過, 返回到unmodify狀態, 這個git checkout即從庫中取出文件, 覆蓋當前修改 !

* Staged: 暫存狀態. 執行git commit則將修改同步到庫中, 這時庫中的文件和本地文件又變為一致, 文件為Unmodify狀態. 執行git reset HEAD filename取消暫存, 文件狀態為Modified

![集中版vs分佈式](/images/git5.png)

`查看文件狀態`

上面說文件有4種狀態，通過如下命令可以查看到文件的狀態：
```
#查看指定文件状态
git status [filename]

#查看所有文件状态
git status
```

`忽略文件`
有些時候我們不想把某些文件納入版本控制中，比如數據庫文件，臨時文件，設計文件等

在主目錄下建立".gitignore"文件，此文件有如下規則：

忽略文件中的空行或以井號（#）開始的行將會被忽略。

可以使用Linux通配符。例如：星號（*）代表任意多個字符，問號（？）代表一個字符，方括號（[abc]）代表可選字符範圍，大括號（{string1,string2,...}）代表可選的字符串等。

如果名稱的最前面有一個感嘆號（!），表示例外規則，將不被忽略。

如果名稱的最前面是一個路徑分隔符（/），表示要忽略的文件在此目錄下，而子目錄中的文件不忽略。

如果名稱的最後面是一個路徑分隔符（/），表示要忽略的是此目錄下該名稱的子目錄，而非文件（默認文件或目錄都忽略）。

```
#为注释
*.txt        #忽略所有 .txt结尾的文件,这样的话上传就不会被选中！
!lib.txt     #但lib.txt除外
/temp        #仅忽略项目根目录下的TODO文件,不包括其它目录temp
build/       #忽略build/目录下的所有文件
doc/*.txt    #会忽略 doc/notes.txt 但不包括 doc/server/arch.txt

# git add .                  添加所有文件到暂存区
# git commit -m "消息内容"    提交暂存区中的内容到本地仓库 -m 提交信息
```
`.gitattributes`

.gitattributes 是用來告訴 Git 此專案要客製化的部份，為什麼要客製呢，因為 LFS 的使用條件就是你必須要告訴 Git，”這個檔案是 LFS 檔，請用 LFS 的方式處理“，但我們不需要自己設定，透過 git lfs 指令操作即可。

其實不只大型檔案，所有的檔案都可以用 .gitattributes 來告訴 Git 該怎麼處理這個檔案

`Git LFS`

 是 Large File Storage 的縮寫，主要是讓 Git 能夠處理大型檔案。因為 Git 的設計上都是以文字檔的程式碼為主，而程式碼的大小通常都不會太大，都是很多小型檔案為主。而當其他開發者在使用 Clone 來複製你的專案時，Git 預設會拉下 master 分支內的所東西，其實不只是當前的檔案，還包括了每一個檔案的歷史紀錄，這些東西都會除存在 .git 的目錄裡面。

所以若你將大型檔案 commit 到 master 內，就會發生一場災難，只要所有與此專案相關的人，都必須下載這個檔案，更不用說如果有異動的時候。

## `Git工作流`

#### 1.1 概念

```
在項目開發過程中使用Git的方式
```

#### 1.2 分類

##### 1.2.1 集中式工作流

```
像SVN一樣，集中式工作流有一個中央倉庫，所有的修改都提交到了Master分支上
```

##### 1.2.2 GitFlow工作流`*`

主幹分支`master` 開發分支`develop` 修復分支​​`hotfix` 預發布分支`release` 功能分支`feature`

```
GitFlow 有獨立的分支，讓發布迭代過程更流暢。
```

##### 1.2.3 Forking 工作流    

```
在GitFlow 基礎上， 充分利用了Git 的Fork 和pull request 的功能以達到代碼審核的目的。 
安全可靠地管理大團隊的開發者
```
`Git優缺點`

優點：

1、適合分布式開發，強調個體。

2、公共伺服器壓力和數據量都不會太大。

3、速度快、靈活。

4、任意兩個開發者之間可以很容易的解決衝突。

5、離線工作。

缺點：

1、學習周期相對而言比較長。

2、不符合常規思維。

3、代碼保密性差，一旦開發者把整個庫克隆下來就可以完全公開所有代碼和版本信息。

4、Git對某些類型的項目可能很好用（我的一些個人小項目也用git），但是對上千人合作，動輒幾十G的大項目就是災難，Git的做法是對每個revision都保存完整快照。



