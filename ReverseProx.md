# reverse proxy

反向代理是系統設計中常用到的一個概念，是相對於正向代理的一種中介服務，還常常與負載均衡作比較。今天就班門弄斧談一談自己的代理體會。

正向代理
先了解一下Reverse Proxy的反義詞——正向代理（Forward Proxy）。正向代理是一種特殊的網絡服務，允許一個網絡終端通過這個服務與另一個網絡終端進行非直接的連接。一般情況下，我們說的代理服務就是指正向代理。舉個不和諧的例子，科學上網時，我們訪問google用的就是正向代理服務。

![reverse proxy](/images/14368237-5326969679804532.webp)

反向服務
正向服務過於不和諧，我就不展開介紹了。那反向服務又是怎麼一回事呢？反向代理為何叫反向代理？它生動地展示了正向代理與反向代理的區別。

![reverse proxy](/images/14368237-6bf75c47b9d9e5c5.webp)


正向代理和反向代理最大的區別在於他們的服務邊界：正向代理服務器屬於互聯網客戶端，而反向代理服務器則是服務端的一部分。簡單來說就是：一個是代理客戶端，一個是代理服務器。

![reverse proxy](/images/14368237-38e74366d6853eba.webp)


反向代理是一個可以集中調用內部服務，並提供統一接口給公共客戶的web服務器。來自客戶端的請求先被反向代理服務器轉發到可響應請求的服務器，然後代理再把服務器的響應結果返回給客戶端。

## 優缺點
反向代理主要有以下好處：


增加安全性：隱藏後端服務的信息，設置黑白名單

提高可擴展性和靈活性：客戶端只能看到反向代理服務器的IP，運維只需通過配置增減服務

終結SSL會話：解密傳入請求和加密服務器響應；後端服務器就不必完成這些額外的操作

壓縮、緩存、添加請求頭等一些附加功能。

不利之處：

增加複雜度
延遲
單點故障

# 總結

反向代理根據客戶端的請求，從其關聯的一組或多組後端服務器上獲取資源，然後再將這些資源返回給客戶端；客戶端只知道反向代理的IP地址，而不需知道代理服務器身後服務器集群的存在。
